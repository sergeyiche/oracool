# ๐๏ธ ะคะธะปะพัะพััะบะธะน Telegram-ะฑะพั ั RAG

> ะะฝัะตะปะปะตะบััะฐะปัะฝัะน AI-ะบะพะฝััะปััะฐะฝั ะดะปั ัะบะทะธััะตะฝัะธะฐะปัะฝัั ะฒะพะฟัะพัะพะฒ ะฝะฐ ะฑะฐะทะต **Retrieval-Augmented Generation (RAG)**, ััะพะธัะตัะบะพะน ัะธะปะพัะพัะธะธ, ัะฝะณะธะฐะฝัะบะพะน ะฟัะธัะพะปะพะณะธะธ ะธ ัะบะทะธััะตะฝัะธะฐะปัะฝะพะน ัะตัะฐะฟะธะธ.

**ะกัะฐััั:** โ Production Ready | **ะะตััะธั:** 1.0.0

---

## ๐ ะกะพะดะตัะถะฐะฝะธะต

- [ะ ะฟัะพะตะบัะต](#-ะพ-ะฟัะพะตะบัะต)
- [ะะฐะบ ัะฐะฑะพัะฐะตั ัะฐั-ะฑะพั](#-ะบะฐะบ-ัะฐะฑะพัะฐะตั-ัะฐั-ะฑะพั)
- [ะะพะทะผะพะถะฝะพััะธ](#-ะฒะพะทะผะพะถะฝะพััะธ)
- [ะัััััะน ััะฐัั](#-ะฑัััััะน-ััะฐัั)
- [ะััะธัะตะบัััะฐ](#-ะฐััะธัะตะบัััะฐ)
- [ะะพะบัะผะตะฝัะฐัะธั](#-ะดะพะบัะผะตะฝัะฐัะธั)
- [ะะพะผะฐะฝะดั](#-ะบะพะผะฐะฝะดั)
- [ะะตััะธะบะธ](#-ะผะตััะธะบะธ)

---

## ๐ฏ ะ ะฟัะพะตะบัะต

ะญัะพ ะฝะต ะพะฑััะฝัะน ัะฐั-ะฑะพั ั ะทะฐะณะพัะพะฒะปะตะฝะฝัะผะธ ะพัะฒะตัะฐะผะธ. ะญัะพ **ะธะฝัะตะปะปะตะบััะฐะปัะฝะฐั ัะธััะตะผะฐ**, ะบะพัะพัะฐั:

- ๐ **ะฅัะฐะฝะธั ะฑะฐะทั ะทะฝะฐะฝะธะน** - 217 ัะตะบััะพะฒ ะฟะพ ััะพะธัะธะทะผั, ะฎะฝะณั, ะคัะฐะฝะบะปั
- ๐ **ะะพะฝะธะผะฐะตั ัะผััะป** - ะฒะตะบัะพัะฝัะน ะฟะพะธัะบ ะฝะฐัะพะดะธั ัะตะปะตะฒะฐะฝัะฝัะต ัะตะบััั
- ๐ค **ะะตะฝะตัะธััะตั ัะฝะธะบะฐะปัะฝัะต ะพัะฒะตัั** - AI ัะพะทะดะฐัั ะฟะตััะพะฝะฐะปะธะทะธัะพะฒะฐะฝะฝัะน ะพัะฒะตั
- ๐ฌ **ะะพะผะฝะธั ะบะพะฝัะตะบัั** - ะบะฐะถะดัะน ะดะธะฐะปะพะณ ัะพััะฐะฝัะตััั ะดะปั ัะฒัะทะฝัั ะฑะตัะตะด
- ๐ฅ **ะะฝะพะณะพะฟะพะปัะทะพะฒะฐัะตะปััะบะธะน** - ะธะทะพะปะธัะพะฒะฐะฝะฝัะต ะฟัะพัะธะปะธ ะธ ะธััะพัะธั ะดะปั ะบะฐะถะดะพะณะพ

### ๐ญ ะคะธะปะพัะพััะบะธะน ะฟะพะดัะพะด

ะะพั ะบะพะฝััะปััะธััะตั ะฒ ะดััะต:
- **ะกัะพะธัะธะทะผะฐ** - ะฟัะธะฝััะธะต ะฝะตะธะทะฑะตะถะฝะพะณะพ, ัะพะบัั ะฝะฐ ะฟะพะดะบะพะฝััะพะปัะฝะพะผ
- **ะฎะฝะณะธะฐะฝััะฒะฐ** - ัะฐะฑะพัะฐ ั ัะตะฝัั, ะฐััะตัะธะฟะฐะผะธ, ะธะฝะดะธะฒะธะดัะฐัะธะตะน
- **ะญะบะทะธััะตะฝัะธะฐะปะธะทะผะฐ** - ะฟะพะธัะบ ัะผััะปะฐ, ะพัะฒะตัััะฒะตะฝะฝะพััั, ะฐััะตะฝัะธัะฝะพััั

---

## ๐ค ะะฐะบ ัะฐะฑะพัะฐะตั ัะฐั-ะฑะพั

### ๐ ะัะพััะพะต ะพะฑัััะฝะตะฝะธะต

```
ะะพะปัะทะพะฒะฐัะตะปั โ "ะะฐะบ ะฝะฐะนัะธ ัะผััะป ะถะธะทะฝะธ?"
          โ
    [RAG Pipeline]
          โ
     ะะพั โ "ะคัะฐะฝะบะป ะณะพะฒะพัะธะป, ััะพ ัะผััะป ะฝะต ะฒะพะพะฑัะต..."
```

### ๐ฌ ะะตัะฐะปัะฝัะน ะฟัะพัะตัั (RAG Pipeline)

#### **ะจะฐะณ 1: ะะพะปััะตะฝะธะต ัะพะพะฑัะตะฝะธั**

```
๐ค USER ะฒ Telegram: "ะะฐะบ ะฝะฐะนัะธ ัะผััะป ะถะธะทะฝะธ?"
         โ
    Telegram API
         โ
   Webhook โ /webhook/telegram
         โ
   TelegramWebhookController
         โ
   Symfony Messenger (ะพัะตัะตะดั Redis)
         โ
   MessageProcessingWorker
```

#### **ะจะฐะณ 2: ะฃะฟัะฐะฒะปะตะฝะธะต ะดะธะฐะปะพะณะพะผ**

```php
ProcessTelegramMessage::execute()
  โ
1. ะะฐะนัะธ/ัะพะทะดะฐัั Conversation (ะดะธะฐะปะพะณ ะฟะพะปัะทะพะฒะฐัะตะปั)
2. ะกะพััะฐะฝะธัั incoming message ะฒ ะะ
3. ะะฐะณััะทะธัั ะฟะพัะปะตะดะฝะธะต 10 ัะพะพะฑัะตะฝะธะน ะธะท ะธััะพัะธะธ
  โ
conversationHistory = [
  {role: 'user', content: 'ะัะธะฒะตั'},
  {role: 'assistant', content: 'ะะดัะฐะฒััะฒัะน!'},
  ...
]
```

**ะะฐะทะฐ ะดะฐะฝะฝัั:**
```sql
conversations
  id: uuid
  user_id: "858361483"
  chat_id: "123456"
  status: "active"
  message_count: 15
  
messages
  conversation_id: uuid
  direction: "incoming" | "outgoing"
  content: "ะะฐะบ ะฝะฐะนัะธ ัะผััะป ะถะธะทะฝะธ?"
  metadata: {relevance: 0.87, time: 7500ms}
```

#### **ะจะฐะณ 3: Embedding (ะฒะตะบัะพัะธะทะฐัะธั)**

```
ะขะตะบัั ะฒะพะฟัะพัะฐ:
"ะะฐะบ ะฝะฐะนัะธ ัะผััะป ะถะธะทะฝะธ?"
     โ
Ollama (nomic-embed-text)
     โ
ะะตะบัะพั (768 ัะธัะตะป):
[0.234, -0.451, 0.127, ..., 0.089]
```

**ะงัะพ ััะพ ะทะฝะฐัะธั?**
- ะะฐะถะดะพะต ัะปะพะฒะพ โ ะฟะพะทะธัะธั ะฒ 768-ะผะตัะฝะพะผ ะฟัะพัััะฐะฝััะฒะต
- ะะพัะพะถะธะต ะฟะพ ัะผััะปั ัะตะบััั โ ะฑะปะธะทะบะธะต ะฒะตะบัะพัั
- ะะฐัััะพัะฝะธะต ะผะตะถะดั ะฒะตะบัะพัะฐะผะธ = ัะตะผะฐะฝัะธัะตัะบะฐั ะฑะปะธะทะพััั

#### **ะจะฐะณ 4: Vector Search (ะฟะพะธัะบ ะฒ ะฑะฐะทะต ะทะฝะฐะฝะธะน)**

```sql
PostgreSQL + pgvector
  โ
SELECT text, 
       calculate_cosine_similarity(embedding, [0.234, ...]) as similarity
FROM knowledge_base
WHERE user_id = '858361483'
  AND similarity >= 0.65
ORDER BY similarity DESC
LIMIT 5
```

**ะะตะทัะปััะฐั:**
```
โ 87.2% - "ะคัะฐะฝะบะป: ัะผััะป ะฝะต ะฒะพะพะฑัะต, ะฐ ะฒ ะดะฐะฝะฝัะน ะผะพะผะตะฝั..."
โ 84.3% - "ะขัะธ ะธััะพัะฝะธะบะฐ ัะผััะปะฐ: ัะฒะพััะตััะฒะพ, ะฟะตัะตะถะธะฒะฐะฝะธะต, ะฟะพะทะธัะธั..."
โ 81.7% - "ะกัะพะธัะธะทะผ: ัะผััะป ะฒ ะถะธะทะฝะธ ัะพะณะปะฐัะฝะพ ะดะพะฑัะพะดะตัะตะปะธ..."
โ 79.1% - "ะะพะณะพัะตัะฐะฟะธั: ะฒะพะฟัะพั ะฝะต 'ะฒ ััะผ ัะผััะป', ะฐ 'ะบัะพ ัะฟัะฐัะธะฒะฐะตั'..."
โ 76.8% - "ะญะบะทะธััะตะฝัะธะฐะปัะฝัะน ะฒะฐะบััะผ ะธ ะบะฐะบ ะตะณะพ ะฟัะตะพะดะพะปะตัั..."
```

#### **ะจะฐะณ 5: Prompt Augmentation (ะพะฑะพะณะฐัะตะฝะธะต ะบะพะฝัะตะบััะฐ)**

```
ะกะธััะตะผะฝัะน ะฟัะพะผะฟั:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ ะขั ัะธะปะพัะพั-ะบะพะฝััะปััะฐะฝั.                        โ
โ ะกัะธะปั: balanced (ะฑะฐะปะฐะฝั ะณะปัะฑะธะฝั ะธ ะฟัะพััะพัั)    โ
โ ะะปะธะฝะฐ: medium (3-5 ะฟัะตะดะปะพะถะตะฝะธะน)               โ
โ ะะพะดัะพะด:                                        โ
โ - ะะฐะดะฐะฒะฐะน ะฒะพะฟัะพัั                             โ
โ - ะัะฟะพะปัะทัะน ะผะตัะฐัะพัั                          โ
โ - ะะทะฑะตะณะฐะน ัะพะบัะธัะฝะพะณะพ ะฟะพะทะธัะธะฒะฐ                 โ
โ                                               โ
โ ะะฐะทะฐ ะทะฝะฐะฝะธะน (5 ะทะฐะฟะธัะตะน):                      โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ 87.2% | "ะคัะฐะฝะบะป: ัะผััะป ะฝะต ะฒะพะพะฑัะต..."          โ
โ 84.3% | "ะขัะธ ะธััะพัะฝะธะบะฐ ัะผััะปะฐ..."             โ
โ 81.7% | "ะกัะพะธัะธะทะผ: ัะผััะป ะฒ ะถะธะทะฝะธ..."          โ
โ ...                                           โ
โ โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ ะัะฟะพะปัะทัะน ััะธ ัะตะบััั ะบะฐะบ ะพัะฝะพะฒั ะพัะฒะตัะฐ.       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

ะััะพัะธั ะดะธะฐะปะพะณะฐ:
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ user: "ะัะธะฒะตั!"                               โ
โ assistant: "ะะดัะฐะฒััะฒัะน. ะงะตะผ ะผะพะณั ะฟะพะผะพัั?"     โ
โ user: "ะะฐะบ ะฝะฐะนัะธ ัะผััะป ะถะธะทะฝะธ?"                โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

#### **ะจะฐะณ 6: LLM Generation (ะณะตะฝะตัะฐัะธั ะพัะฒะตัะฐ)**

```
DeepSeek-V3 API
  โ
POST https://api.deepseek.com/chat/completions
{
  "model": "deepseek-chat",
  "messages": [
    {"role": "system", "content": "ะขั ัะธะปะพัะพั..."},
    {"role": "user", "content": "ะัะธะฒะตั!"},
    {"role": "assistant", "content": "ะะดัะฐะฒััะฒัะน..."},
    {"role": "user", "content": "ะะฐะบ ะฝะฐะนัะธ ัะผััะป ะถะธะทะฝะธ?"}
  ],
  "temperature": 0.7,
  "max_tokens": 500
}
  โ
Response (7.5 ัะตะบ):
```

**ะัะฒะตั ะฑะพัะฐ:**
```
ะะผะตััะพ ะฟะพะธัะบะฐ ะฐะฑัััะฐะบัะฝะพะณะพ "ัะผััะปะฐ ะถะธะทะฝะธ" ะฟะพะฟัะพะฑัะนัะต ัะฟัะพัะธัั 
ัะตะฑั: ะบะฐะบะพะน ะบะพะฝะบัะตัะฝัะน ัะผััะป ั ะผะพะณั ะฝะฐะนัะธ ะฒ ัะฒะพะตะน ัะตะบััะตะน 
ัะธััะฐัะธะธ ะฟััะผะพ ัะตะนัะฐั? 

ะะฐะบ ะณะพะฒะพัะธะป ะคัะฐะฝะบะป, ัะตะปะพะฒะตะบะฐ ะธะฝัะตัะตััะตั ะฝะต ัะผััะป ะถะธะทะฝะธ ะฒะพะพะฑัะต, 
ะฐ ัะผััะป ะตะณะพ ัะพะฑััะฒะตะฝะฝะพะน ะถะธะทะฝะธ ะฒ ะดะฐะฝะฝัะน ะผะพะผะตะฝั. ะญัะพ ัะผััะป ะผะพะถะฝะพ 
ะฝะฐะนัะธ ัะตัะตะท:
โข ะขะฒะพััะตััะฒะพ (ััะพ ะฒั ัะพะทะดะฐััะต)
โข ะะตัะตะถะธะฒะฐะฝะธะต (ััะพ ะฒั ะปัะฑะธัะต) 
โข ะะพะทะธัะธั (ะบะฐะบ ะฒั ะพัะฝะพัะธัะตัั ะบ ะฝะตะธะทะฑะตะถะฝะพะผั)

ะงัะพ ะธะท ััะพะณะพ ัะตะทะพะฝะธััะตั ั ะฒะฐะผะธ ะฑะพะปััะต ะฒัะตะณะพ?
```

#### **ะจะฐะณ 7: ะกะพััะฐะฝะตะฝะธะต ัะตะทัะปััะฐัะฐ**

```
ProcessTelegramMessage
  โ
1. ะกะพััะฐะฝะธัั outgoing message ะฒ ะะ
   โโ metadata: {relevance: 87.2%, time: 7500ms, entries: 5}
2. ะะฑะฝะพะฒะธัั conversation.message_count
3. ะะฑะฝะพะฒะธัั conversation.last_message_at
4. ะัะฟัะฐะฒะธัั ะพัะฒะตั ะฒ Telegram
  โ
โ ะะพัะพะฒะพ!
```

### ๐ ะัะตะธะผััะตััะฒะฐ ัะฐะบะพะณะพ ะฟะพะดัะพะดะฐ

| ะะพะดัะพะด | ะะฐะบ ัะฐะฑะพัะฐะตั | ะะปััั | ะะธะฝััั |
|--------|--------------|-------|--------|
| **ะะฐะณะพัะพะฒะปะตะฝะฝัะต ะพัะฒะตัั** | if (ะฒะพะฟัะพั == "ัะผััะป") return "ะพัะฒะตั1" | ะััััะพ, ะดััะตะฒะพ | ะะตั ะณะธะฑะบะพััะธ |
| **Fine-tuning LLM** | ะะฑััะธัั ะผะพะดะตะปั ะฝะฐ ัะฒะพะธั ะดะฐะฝะฝัั | ะขะพัะฝัะต ะพัะฒะตัั | ะะพัะพะณะพ, ะผะตะดะปะตะฝะฝะพ ะพะฑะฝะพะฒะปััั |
| **RAG (ะฝะฐั ะฟะพะดัะพะด)** | ะะพะธัะบ + ะณะตะฝะตัะฐัะธั | ะะธะฑะบะพััั, ะปะตะณะบะพ ะพะฑะฝะพะฒะปััั ะฑะฐะทั | ะัะถะฝะฐ ะธะฝััะฐััััะบัััะฐ |

**ะะฐั RAG ะฟะพะทะฒะพะปัะตั:**
- โ ะะพะฑะฐะฒะปััั ะฝะพะฒัะต ะทะฝะฐะฝะธั ะทะฐ ัะตะบัะฝะดั (ะฟัะพััะพ `knowledge:import`)
- โ ะะตะฝะตัะธัะพะฒะฐัั ัะฝะธะบะฐะปัะฝัะต, ะบะพะฝัะตะบััะฝัะต ะพัะฒะตัั
- โ ะะดะฐะฟัะธัะพะฒะฐัััั ะฟะพะด ััะธะปั ะฟะพะปัะทะพะฒะฐัะตะปั
- โ ะะพะผะฝะธัั ะธััะพัะธั ะดะธะฐะปะพะณะฐ
- โ ะะฐะฑะพัะฐัั ั ะปัะฑัะผ LLM (DeepSeek, OpenAI, Ollama)

---

## โจ ะะพะทะผะพะถะฝะพััะธ

### ๐ฏ ะัะฝะพะฒะฝัะต ัะธัะธ

- ๐ค **RAG Pipeline** - ะฒะตะบัะพัะฝัะน ะฟะพะธัะบ + AI ะณะตะฝะตัะฐัะธั
- ๐ง **DeepSeek-V3** - ะบะฐัะตััะฒะพ GPT-4 ะทะฐ $2/ะผะตััั (ะฒ 10 ัะฐะท ะดะตัะตะฒะปะต!)
- ๐ **ะะฐะทะฐ ะทะฝะฐะฝะธะน** - ััะพะธัะธะทะผ, ะฎะฝะณ, ัะบะทะธััะตะฝัะธะฐะปัะฝะฐั ัะตัะฐะฟะธั
- ๐ฌ **Multi-turn ะดะธะฐะปะพะณะธ** - ะฑะพั ะฟะพะผะฝะธั ะบะพะฝัะตะบัั ะฑะตัะตะดั
- ๐ฅ **ะะฝะพะณะพะฟะพะปัะทะพะฒะฐัะตะปััะบะธะน** - ะฐะฒัะพะผะฐัะธัะตัะบะพะต ัะพะทะดะฐะฝะธะต ะฟัะพัะธะปะตะน ั ะบะพะฟะธัะพะฒะฐะฝะธะตะผ ะฑะฐะทั ะทะฝะฐะฝะธะน
- โก **ะัะธะฝััะพะฝะฝะฐั ะพะฑัะฐะฑะพัะบะฐ** - Symfony Messenger + Redis
- ๐ **PostgreSQL + pgvector** - ะฒะตะบัะพัะฝัะน ะฟะพะธัะบ
- ๐ณ **Docker** - ะฒัั ะฒ ะบะพะฝัะตะนะฝะตัะฐั

### ๐ ะะตััะพะฝะฐะปะธะทะฐัะธั

ะะฐะถะดัะน ะฟะพะปัะทะพะฒะฐัะตะปั ะผะพะถะตั ะฝะฐัััะพะธัั:

```bash
docker exec oracool-app php bin/console profile:update YOUR_ID \
  --style creative \          # formal|casual|creative|technical
  --length long \             # short|medium|long
  --threshold 0.7             # ะฟะพัะพะณ ัะตะปะตะฒะฐะฝัะฝะพััะธ (0.5-0.9)
```

**ะะตะถะธะผั ัะฐะฑะพัั:**
- `active` - ะพัะฒะตัะฐะตั ะฝะฐ ัะตะปะตะฒะฐะฝัะฝัะต ะฒะพะฟัะพัั
- `always_respond` - ะพัะฒะตัะฐะตั ะฒัะตะณะดะฐ
- `passive` - ัะพะปัะบะพ ัะปััะฐะตั

### ๐๏ธ ะฃะฟัะฐะฒะปะตะฝะธะต ะดะธะฐะปะพะณะฐะผะธ

```bash
# ะกะฟะธัะพะบ ะฒัะตั ะดะธะฐะปะพะณะพะฒ
docker exec oracool-app php bin/console conversation:list YOUR_ID

# ะัะพัะผะพัั ะบะพะฝะบัะตัะฝะพะณะพ ะดะธะฐะปะพะณะฐ
docker exec oracool-app php bin/console conversation:show CONVERSATION_ID

# ะัะธััะธัั ะธััะพัะธั (ะฝะฐัะฐัั ะฝะพะฒัะน ะดะธะฐะปะพะณ)
docker exec oracool-app php bin/console conversation:clear YOUR_ID CHAT_ID
```

**ะงัะพ ััะฐะฝะธััั:**
- ะัะต ัะพะพะฑัะตะฝะธั (incoming + outgoing)
- ะะตัะฐะดะฐะฝะฝัะต RAG (ัะตะปะตะฒะฐะฝัะฝะพััั, ะฒัะตะผั, ะธัะฟะพะปัะทะพะฒะฐะฝะฝัะต ะทะฐะฟะธัะธ)
- ะกัะฐัะธััะธะบะฐ (ััะตะดะฝัั ัะตะปะตะฒะฐะฝัะฝะพััั, ะฒัะตะผั ะพัะฒะตัะฐ)

---

## ๐ ะัััััะน ััะฐัั

### ะัะตะดะฒะฐัะธัะตะปัะฝัะต ััะตะฑะพะฒะฐะฝะธั

- Docker + Docker Compose
- 2GB RAM (ะผะธะฝะธะผัะผ), 4GB (ัะตะบะพะผะตะฝะดัะตััั)
- Telegram Bot Token
- DeepSeek API Key (ะฟะพะปััะธัั ะฝะฐ https://platform.deepseek.com)

### ะฃััะฐะฝะพะฒะบะฐ ะทะฐ 5 ะผะธะฝัั

#### 1. ะะปะพะฝะธัะพะฒะฐะฝะธะต

```bash
cd /www
git clone <your-repo-url> oracool
cd oracool
```

#### 2. ะะฐัััะพะนะบะฐ ะพะบััะถะตะฝะธั

```bash
cp env.example .env
nano .env
```

**ะะธะฝะธะผะฐะปัะฝะฐั ะบะพะฝัะธะณััะฐัะธั:**
```bash
# PostgreSQL
POSTGRES_PASSWORD=your_secure_password

# Telegram
TELEGRAM_BOT_TOKEN=1234567890:ABCdefGHIjklMNOpqrsTUVwxyz
TELEGRAM_WEBHOOK_SECRET=your_random_secret_string

# DeepSeek (ัะตะบะพะผะตะฝะดัะตััั ะดะปั ััััะบะพะณะพ ัะทัะบะฐ)
DEEPSEEK_API_KEY=sk-your-api-key-from-deepseek
DEEPSEEK_BASE_URL=https://api.deepseek.com
DEEPSEEK_LLM_MODEL=deepseek-chat

# LLM/Embedding ะฟัะพะฒะฐะนะดะตัั
LLM_PROVIDER=deepseek
EMBEDDING_PROVIDER=ollama
```

#### 3. ะะฐะฟััะบ ะบะพะฝัะตะนะฝะตัะพะฒ

```bash
# ะะพะดะฝััั ะฒัะต ัะตัะฒะธัั
docker compose up -d

# ะัะพะฒะตัะธัั ััะฐััั
docker compose ps

# ะัะธะผะตะฝะธัั ะผะธะณัะฐัะธะธ ะะ
docker exec oracool-app php bin/console doctrine:migrations:migrate --no-interaction
```

#### 4. ะกะพะทะดะฐัั ะฟัะพัะธะปั ะฟะพะปัะทะพะฒะฐัะตะปั

```bash
# ะะฐะผะตะฝะธัะต YOUR_TELEGRAM_ID ะฝะฐ ะฒะฐั ID (ัะทะฝะฐัั: @userinfobot)
docker exec oracool-app php bin/console profile:create YOUR_TELEGRAM_ID \
  --mode=active \
  --style=balanced \
  --threshold=0.65
```

#### 5. ะะฐะณััะทะธัั ะฑะฐะทั ะทะฝะฐะฝะธะน

```bash
# ะัะฟะพะปัะทะพะฒะฐัั ะณะพัะพะฒัะต ะฟัะธะผะตัั
cd knowledge_examples
./import_all.sh YOUR_TELEGRAM_ID

# ะะปะธ ะธะผะฟะพััะธัะพะฒะฐัั ะฒัััะฝัั
docker exec oracool-app php bin/console knowledge:import \
  /path/to/your/texts.txt YOUR_TELEGRAM_ID manual
```

#### 6. ะะฐัััะพะธัั webhook

```bash
# ะะปั ะฟัะพะดะฐะบัะตะฝะฐ ั HTTPS
docker exec oracool-app php bin/console telegram:webhook:setup \
  https://your-domain.com/webhook/telegram

# ะะปั ัะฐะทัะฐะฑะพัะบะธ ั ngrok
ngrok http 80
docker exec oracool-app php bin/console telegram:webhook:setup \
  https://abc123.ngrok.io/webhook/telegram
```

#### 7. ะัะพัะตััะธัะพะฒะฐัั

```bash
# ะขะตัั RAG (ะฒะตะบัะพัะฝัะน ะฟะพะธัะบ)
docker exec oracool-app php bin/console test:rag YOUR_TELEGRAM_ID \
  "ะะฐะบ ะฝะฐะนัะธ ัะผััะป ะถะธะทะฝะธ?"

# ะขะตัั ะฟะพะปะฝะพะณะพ ะฟะฐะนะฟะปะฐะนะฝะฐ (RAG + LLM)
docker exec oracool-app php bin/console test:response YOUR_TELEGRAM_ID \
  "ะะฐะบ ะฝะฐะนัะธ ัะผััะป ะถะธะทะฝะธ?"
```

**ะะถะธะดะฐะตะผัะน ัะตะทัะปััะฐั:**
```
โ Conversation ัะพะทะดะฐะฝ
โ ะะตะปะตะฒะฐะฝัะฝะพััั: 87%
โ ะัะฟะพะปัะทะพะฒะฐะฝะพ ะทะฐะฟะธัะตะน: 5
โ ะัะตะผั: 7.5 ัะตะบัะฝะด
โ LLM Model: deepseek:deepseek-chat
โ ะัะฒะตั: "ะะผะตััะพ ะฟะพะธัะบะฐ ะฐะฑัััะฐะบัะฝะพะณะพ..."
```

#### 8. ะัะบัััั ะฑะพัะฐ ะฒ Telegram

ะะฐะนะดะธัะต ะฑะพัะฐ ะฟะพ username ะธ ะพัะฟัะฐะฒััะต ัะพะพะฑัะตะฝะธะต:
```
ะัะธะฒะตั! ะะฐะบ ะฝะฐะนัะธ ัะผััะป ะถะธะทะฝะธ?
```

**ะะพัะพะฒะพ!** ๐

---

## ๐ ะััะธัะตะบัััะฐ

### ะััะพะบะพััะพะฒะฝะตะฒะฐั ััะตะผะฐ

```
โโโโโโโโโโโโโโโ
โ  Telegram   โ ๐ค ะะพะปัะทะพะฒะฐัะตะปะธ
โ   Users     โ
โโโโโโโโฌโโโโโโโ
       โ HTTPS
       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              Nginx (Reverse Proxy)                  โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
       โ
       โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ         Symfony App (PHP-FPM)                       โ
โ                                                     โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โ  โ  TelegramWebhookController                   โ  โ
โ  โ         โ                                    โ  โ
โ  โ  ProcessTelegramMessage (Use Case)           โ  โ
โ  โ         โ                                    โ  โ
โ  โ  โโโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโโ       โ  โ
โ  โ  โ Embedding    โ   โ Vector       โ       โ  โ
โ  โ  โ Service      โโ  โ Search       โ       โ  โ
โ  โ  โโโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโโ       โ  โ
โ  โ         โ                    โ              โ  โ
โ  โ  โโโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโโ       โ  โ
โ  โ  โ LLM Service  โ   โ Conversation โ       โ  โ
โ  โ  โ (DeepSeek)   โ   โ Repository   โ       โ  โ
โ  โ  โโโโโโโโโโโโโโโโ   โโโโโโโโโโโโโโโโ       โ  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ  โ
โโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโ
       โ                                  โ
       โผ                                  โผ
โโโโโโโโโโโโโโโโ                   โโโโโโโโโโโโโโโโ
โ  PostgreSQL  โ                   โ    Redis     โ
โ  + pgvector  โ                   โ   (Queue)    โ
โโโโโโโโโโโโโโโโ                   โโโโโโโโโโโโโโโโ
       โ
       โโ ะฅัะฐะฝะธั:
          โข user_profiles (ะฝะฐัััะพะนะบะธ)
          โข knowledge_base (ะฑะฐะทะฐ ะทะฝะฐะฝะธะน ั embeddings)
          โข conversations (ะดะธะฐะปะพะณะธ)
          โข messages (ะธััะพัะธั ัะพะพะฑัะตะฝะธะน)

โโโโโโโโโโโโโโโโ
โ    Ollama    โ ะะพะบะฐะปัะฝัะน LLM/Embedding
โโโโโโโโโโโโโโโโ
```

### ะกัะตะบ ัะตัะฝะพะปะพะณะธะน

**Backend:**
- PHP 8.2
- Symfony 6.4 (Framework)
- Doctrine ORM/DBAL (Database)
- Symfony Messenger (Queue)

**Database:**
- PostgreSQL 14
- pgvector (ะฒะตะบัะพัะฝะพะต ัะฐััะธัะตะฝะธะต)

**AI/ML:**
- DeepSeek-V3 (LLM ะณะตะฝะตัะฐัะธั)
- Ollama + nomic-embed-text (Embedding)
- OpenAI SDK (ะดะปั DeepSeek API)

**Infrastructure:**
- Docker + Docker Compose
- Nginx (web server)
- Redis (message queue)
- PHP-FPM (application server)

**ะััะธัะตะบัััะฝัะน ะฟะฐััะตัะฝ:**
- Clean Architecture (Hexagonal)
- Domain-Driven Design (DDD)
- CQRS-ะฟะพะดะพะฑะฝะพะต ัะฐะทะดะตะปะตะฝะธะต

### ะกัััะบัััะฐ ะบะพะดะฐ

```
src/
โโโ Core/
โ   โโโ Domain/           # ะะพะผะตะฝะฝัะต ัััะฝะพััะธ
โ   โ   โโโ User/
โ   โ   โ   โโโ UserProfile.php
โ   โ   โโโ Conversation/
โ   โ       โโโ Conversation.php
โ   โ       โโโ Message.php
โ   โโโ Port/             # ะะฝัะตััะตะนัั (ะฟะพััั)
โ   โ   โโโ LLMServiceInterface.php
โ   โ   โโโ EmbeddingServiceInterface.php
โ   โ   โโโ Repository/
โ   โ       โโโ ConversationRepositoryInterface.php
โ   โ       โโโ UserProfileRepositoryInterface.php
โ   โโโ UseCase/          # ะะธะทะฝะตั-ะปะพะณะธะบะฐ
โ       โโโ ProcessTelegramMessage.php
โ       โโโ GenerateResponse.php
โโโ Adapter/              # ะะดะฐะฟัะตัั (ัะตะฐะปะธะทะฐัะธะธ)
โ   โโโ AI/
โ   โ   โโโ DeepSeekLLMService.php
โ   โ   โโโ OllamaLLMService.php
โ   โ   โโโ OllamaEmbeddingService.php
โ   โโโ Database/
โ   โ   โโโ PostgreSQLVectorSearchService.php
โ   โโโ Telegram/
โ       โโโ TelegramBotAPI.php
โโโ Repository/           # Doctrine ัะตะฟะพะทะธัะพัะธะธ
โ   โโโ DoctrineConversationRepository.php
โ   โโโ DoctrineUserProfileRepository.php
โโโ Controller/
โ   โโโ TelegramWebhookController.php
โโโ Command/              # CLI ะบะพะผะฐะฝะดั
โ   โโโ ConversationListCommand.php
โ   โโโ KnowledgeImportCommand.php
โ   โโโ TestRAGCommand.php
โโโ Worker/
    โโโ MessageProcessingWorker.php
```

---

## ๐ ะะพะบัะผะตะฝัะฐัะธั

### ๐ ะัะฝะพะฒะฝัะต ััะบะพะฒะพะดััะฒะฐ

| ะะพะบัะผะตะฝั | ะะฟะธัะฐะฝะธะต | ะะปั ะบะพะณะพ |
|----------|----------|----------|
| **[docs/DEPLOYMENT.md](docs/DEPLOYMENT.md)** | ๐ ะะพะปะฝะพะต ััะบะพะฒะพะดััะฒะพ ะฟะพ ัะฐะทะฒะตัััะฒะฐะฝะธั ะธ ะฝะฐัััะพะนะบะต | DevOps, ัะฐะทัะฐะฑะพััะธะบะธ |
| **[docs/AI_SETUP.md](docs/AI_SETUP.md)** | ๐ค RAG ะฐััะธัะตะบัััะฐ, DeepSeek, ััะฐะฒะฝะตะฝะธะต ะผะพะดะตะปะตะน | AI/ML ะธะฝะถะตะฝะตัั |
| **[docs/TRAINING.md](docs/TRAINING.md)** | ๐ ะะฑััะตะฝะธะต ะฑะพัะฐ, ัะพะทะดะฐะฝะธะต ะฑะฐะทั ะทะฝะฐะฝะธะน | ะะพะฝัะตะฝั-ะผะตะฝะตะดะถะตัั |
| **[docs/IMPORT_CONVERSATION.md](docs/IMPORT_CONVERSATION.md)** | ๐ฌ ะะผะฟะพัั ะดะธะฐะปะพะณะพะฒ ะฒ ะฑะฐะทั ะทะฝะฐะฝะธะน | ะัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ |
| **[docs/USER_MANAGEMENT.md](docs/USER_MANAGEMENT.md)** | ๐ฅ ะฃะฟัะฐะฒะปะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ ะธ ะฑะฐะทะฐะผะธ ะทะฝะฐะฝะธะน | ะะดะผะธะฝะธัััะฐัะพัั |
| **[docs/MULTIUSER_DESIGN.md](docs/MULTIUSER_DESIGN.md)** | ๐ ะััะธัะตะบัััะฐ ะผะฝะพะณะพะฟะพะปัะทะพะฒะฐัะตะปััะบะพะน ัะธััะตะผั | ะััะธัะตะบัะพัั |

### ๐ฏ Quick Start ะดะพะบัะผะตะฝัั

| ะะพะบัะผะตะฝั | ะะฟะธัะฐะฝะธะต |
|----------|----------|
| **[MULTIUSER_QUICKSTART.md](MULTIUSER_QUICKSTART.md)** | ะัััััะน ััะฐัั ะผะฝะพะณะพะฟะพะปัะทะพะฒะฐัะตะปััะบะพะณะพ ัะตะถะธะผะฐ |
| **[TESTING_QUICK_REF.md](TESTING_QUICK_REF.md)** | ะกะฟัะฐะฒะบะฐ ะฟะพ ะฒัะตะผ ะบะพะผะฐะฝะดะฐะผ ัะตััะธัะพะฒะฐะฝะธั |

### ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

| ะะพะบัะผะตะฝั | ะะฟะธัะฐะฝะธะต |
|----------|----------|
| **[docs/TEST_QUESTIONS.md](docs/TEST_QUESTIONS.md)** | 60+ ัะตััะพะฒัั ะฒะพะฟัะพัะพะฒ ะดะปั ะพัะตะฝะบะธ ะบะฐัะตััะฒะฐ |
| **[scripts/test_rag_batch.sh](scripts/test_rag_batch.sh)** | ะะฒัะพะผะฐัะธะทะธัะพะฒะฐะฝะฝะพะต ะฑะฐัั-ัะตััะธัะพะฒะฐะฝะธะต |

### ๐ ะัะธะผะตัั

| ะะธัะตะบัะพัะธั | ะะฟะธัะฐะฝะธะต |
|------------|----------|
| `knowledge_examples/` | ะะพัะพะฒัะต ัะตะบััั ะฟะพ ัะธะปะพัะพัะธะธ (ััะพะธัะธะทะผ, ะฎะฝะณ, ัะบะทะธััะตะฝัะธะฐะปะธะทะผ) |
| `scripts/` | ะฃัะธะปะธัั (ะฟะตัะตะบะปััะตะฝะธะต LLM ะผะพะดะตะปะตะน, ัะตััั) |

---

## ๐๏ธ ะะพะผะฐะฝะดั

### ะฃะฟัะฐะฒะปะตะฝะธะต Docker

```bash
# ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
docker compose up -d

# ะััะฐะฝะพะฒะบะฐ
docker compose down

# ะะตัะตะทะฐะฟััะบ ะบะพะฝะบัะตัะฝะพะณะพ ัะตัะฒะธัะฐ
docker compose restart app

# ะะพะณะธ
docker compose logs -f
docker compose logs -f app  # ัะพะปัะบะพ app
docker compose logs -f --tail 100 app  # ะฟะพัะปะตะดะฝะธะต 100 ัััะพะบ

# ะกัะฐััั
docker compose ps
```

### ะะฐะฑะพัะฐ ั ะฟัะพัะธะปัะผะธ

```bash
# ะกะพะทะดะฐัั ะฟัะพัะธะปั
docker exec oracool-app php bin/console profile:create TELEGRAM_ID \
  --mode=active \
  --style=balanced \
  --threshold=0.65

# ะะฑะฝะพะฒะธัั ะฟัะพัะธะปั
docker exec oracool-app php bin/console profile:update TELEGRAM_ID \
  --mode=active \
  --style=creative \
  --length=long \
  --threshold=0.7
```

### ะะฐะทะฐ ะทะฝะฐะฝะธะน

```bash
# ะะผะฟะพัั ะธะท ัะฐะนะปะฐ
docker exec oracool-app php bin/console knowledge:import \
  /path/to/file.txt TELEGRAM_ID manual

# ะะฐััะพะฒัะน ะธะผะฟะพัั
cd knowledge_examples
./import_all.sh TELEGRAM_ID

# ะกัะฐัะธััะธะบะฐ
docker exec oracool-app php bin/console knowledge:stats TELEGRAM_ID
```

### ะฃะฟัะฐะฒะปะตะฝะธะต ะดะธะฐะปะพะณะฐะผะธ

```bash
# ะกะฟะธัะพะบ ะดะธะฐะปะพะณะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปั
docker exec oracool-app php bin/console conversation:list TELEGRAM_ID

# ะัะพัะผะพัั ะบะพะฝะบัะตัะฝะพะณะพ ะดะธะฐะปะพะณะฐ
docker exec oracool-app php bin/console conversation:show CONVERSATION_ID

# ะัะธััะธัั ะธััะพัะธั ะดะธะฐะปะพะณะฐ (ะฝะฐัะฐัั ะฝะพะฒัะน)
docker exec oracool-app php bin/console conversation:clear TELEGRAM_ID CHAT_ID
```

### ะขะตััะธัะพะฒะฐะฝะธะต

```bash
# ะขะตัั RAG (ัะพะปัะบะพ ะฒะตะบัะพัะฝัะน ะฟะพะธัะบ)
docker exec oracool-app php bin/console test:rag TELEGRAM_ID "ะะฐะบ ะฝะฐะนัะธ ัะผััะป ะถะธะทะฝะธ?"

# ะขะตัั ะฟะพะปะฝะพะณะพ ะฟะฐะนะฟะปะฐะนะฝะฐ (RAG + LLM + Conversation)
docker exec oracool-app php bin/console test:response TELEGRAM_ID "ะะฐะบ ะฝะฐะนัะธ ัะผััะป ะถะธะทะฝะธ?"

# ะะฐัั-ัะตััะธัะพะฒะฐะฝะธะต
/www/oracool/scripts/test_rag_batch.sh TELEGRAM_ID minimal   # 5 ะฒะพะฟัะพัะพะฒ
/www/oracool/scripts/test_rag_batch.sh TELEGRAM_ID standard  # 15 ะฒะพะฟัะพัะพะฒ
/www/oracool/scripts/test_rag_batch.sh TELEGRAM_ID full      # 30 ะฒะพะฟัะพัะพะฒ
```

### Telegram

```bash
# ะะฐัััะพะธัั webhook
docker exec oracool-app php bin/console telegram:webhook:setup \
  https://your-domain.com/webhook/telegram

# ะัะพะฒะตัะธัั webhook
curl -X POST https://your-domain.com/webhook/telegram \
  -H "Content-Type: application/json" \
  -H "X-Telegram-Bot-Api-Secret-Token: YOUR_SECRET" \
  -d '{"message":{"text":"test","from":{"id":YOUR_ID},"chat":{"id":YOUR_CHAT_ID}}}'
```

### ะะตัะตะบะปััะตะฝะธะต LLM ะผะพะดะตะปะตะน

```bash
# DeepSeek-V3 (ัะตะบะพะผะตะฝะดัะตััั ะดะปั ะฟัะพะดะฐะบัะฝะฐ)
/www/oracool/scripts/switch_llm.sh deepseek

# OpenAI GPT-4o-mini
/www/oracool/scripts/switch_llm.sh openai

# Ollama Llama3.2 (ะดะปั ัะฐะทัะฐะฑะพัะบะธ, ะฝะพ ะฟัะพะฑะปะตะผั ั ััััะบะธะผ)
/www/oracool/scripts/switch_llm.sh llama

# Ollama Mistral
/www/oracool/scripts/switch_llm.sh mistral

# Ollama Qwen2.5
/www/oracool/scripts/switch_llm.sh qwen
```

---

## ๐ ะะตััะธะบะธ ะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

### ะฆะตะปะตะฒัะต ะฟะพะบะฐะทะฐัะตะปะธ

| ะะตััะธะบะฐ | ะะพัะผะฐ | ะัะปะธัะฝะพ | ะะพะผะผะตะฝัะฐัะธะน |
|---------|-------|---------|-------------|
| **RAG ัะตะปะตะฒะฐะฝัะฝะพััั** | > 70% | > 85% | Cosine similarity |
| **ะัะตะผั ะพัะฒะตัะฐ** | < 15 ัะตะบ | < 10 ัะตะบ | ะั ะฟะพะปััะตะฝะธั ะดะพ ะพัะฟัะฐะฒะบะธ |
| **ะะฐะทะฐ ะทะฝะฐะฝะธะน** | > 50 ะทะฐะฟะธัะตะน | > 200 ะทะฐะฟะธัะตะน | ะะปั ะบะฐัะตััะฒะตะฝะฝะพะณะพ RAG |
| **ะะฐัะตััะฒะพ ัะทัะบะฐ** | 95% ััััะบะธะน | 100% ััััะบะธะน | ะะตะท ะฟัะธะผะตัะตะน ะดััะณะธั ัะทัะบะพะฒ |
| **Uptime** | > 99% | > 99.9% | ะะพัััะฟะฝะพััั ะฑะพัะฐ |

### ะขะตะบััะธะต ัะตะทัะปััะฐัั (Production)

```
โ RAG ัะตะปะตะฒะฐะฝัะฝะพััั:  87.2%    (ะพัะปะธัะฝะพ!)
โ ะัะตะผั ะพัะฒะตัะฐ:       7.5 ัะตะบ   (ะพัะปะธัะฝะพ!)
โ ะะฐะทะฐ ะทะฝะฐะฝะธะน:        217 ะทะฐะฟะธัะตะน (ะพัะปะธัะฝะพ!)
โ ะะฐัะตััะฒะพ ัะทัะบะฐ:     100% ััััะบะธะน (DeepSeek โ)
โ Conversations:      Multi-user ั ะธััะพัะธะตะน โ
```

### ะกัะฐะฒะฝะตะฝะธะต LLM ะผะพะดะตะปะตะน

| ะะพะดะตะปั | ะัััะบะธะน | ะกะบะพัะพััั | ะกัะพะธะผะพััั/ะผะตััั | ะะตะบะพะผะตะฝะดะฐัะธั |
|--------|---------|----------|-----------------|--------------|
| **DeepSeek-V3** | โญโญโญโญโญ | โกโกโกโก 7ัะตะบ | ๐ฐ $2 | โ **ะะฃะงะจะะ** |
| OpenAI GPT-4o-mini | โญโญโญโญโญ | โกโกโกโกโก 3ัะตะบ | ๐ฐ๐ฐ $5-10 | โ๏ธ ะะพัะพะถะต |
| Ollama Llama3.2 | โญโญ | โกโก 15ัะตะบ | ๐ | โ๏ธ ะกะผะตัะธะฒะฐะตั ัะทัะบะธ |
| Ollama Qwen2.5 | โญโญโญ | โกโก 20ัะตะบ | ๐ | โ๏ธ ะะธัะฐะนัะบะธะน ะฟัะพััะฒะฐะตััั |
| Ollama Mistral | โญโญโญ | โกโกโก 12ัะตะบ | ๐ | ๐ค ะัะธะตะผะปะตะผะพ |

### ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั ะฟะพ ััะฐะฟะฐะผ

```
ะะพะปะฝัะน RAG Pipeline (ััะตะดะฝะตะต ะฒัะตะผั):

1. ะะพะปััะตะฝะธะต ัะพะพะฑัะตะฝะธั (webhook)     0.1 ัะตะบ
2. Embedding (Ollama)                 1.5 ัะตะบ
3. Vector Search (PostgreSQL)         0.2 ัะตะบ
4. LLM Generation (DeepSeek)          5.5 ัะตะบ
5. ะกะพััะฐะฝะตะฝะธะต ัะตะทัะปััะฐัะฐ              0.2 ัะตะบ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ะัะพะณะพ:                                7.5 ัะตะบ
```

---

## ๐ฐ ะกัะพะธะผะพััั ัะบัะฟะปัะฐัะฐัะธะธ

### DeepSeek-V3 (ัะตะบะพะผะตะฝะดัะตััั)

| ะะฑััะผ ะธัะฟะพะปัะทะพะฒะฐะฝะธั | ะะฐะฟัะพัะพะฒ/ะดะตะฝั | ะกัะพะธะผะพััั/ะผะตััั | ะกัะพะธะผะพััั/ะทะฐะฟัะพั |
|---------------------|---------------|-----------------|------------------|
| ะัะณะบะพะต | 10 | ~$0.20 | ~$0.0007 |
| ะกัะตะดะฝะตะต | 50 | ~$1.00 | ~$0.0007 |
| ะะฝัะตะฝัะธะฒะฝะพะต | 100 | ~$2.00 | ~$0.0007 |
| ะะบัะธะฒะฝะพะต | 500 | ~$10.00 | ~$0.0007 |

**ะะตัะฐะปัะฝะฐั ััััะบัััะฐ:**
- Input: $0.14 / 1M tokens
- Output: $0.28 / 1M tokens
- ะกัะตะดะฝะธะน ะทะฐะฟัะพั: ~500 input + ~300 output tokens

### ะกัะฐะฒะฝะตะฝะธะต ะฟัะพะฒะฐะนะดะตัะพะฒ (100 ะทะฐะฟัะพัะพะฒ/ะดะตะฝั)

| ะัะพะฒะฐะนะดะตั | ะกัะพะธะผะพััั/ะผะตััั | ะะฐัะตััะฒะพ | ะกะบะพัะพััั |
|-----------|-----------------|----------|----------|
| **DeepSeek-V3** | ~$2 | โญโญโญโญโญ | โกโกโกโก |
| OpenAI GPT-4o-mini | ~$5-10 | โญโญโญโญโญ | โกโกโกโกโก |
| Ollama (ะปะพะบะฐะปัะฝะพ) | $0 | โญโญโญ | โกโก |

### ะะฝััะฐััััะบัััะฐ

**ะะธะฝะธะผะฐะปัะฝะฐั:**
- VPS: 2GB RAM, 2 CPU - ~$5-10/ะผะตั
- ะะพะผะตะฝ + SSL: ~$10-15/ะณะพะด

**ะะตะบะพะผะตะฝะดัะตะผะฐั:**
- VPS: 4GB RAM, 4 CPU - ~$15-20/ะผะตั
- ะะพะผะตะฝ + SSL: ~$10-15/ะณะพะด

**ะัะพะณะพ:** ~$20-25/ะผะตััั (ะธะฝััะฐััััะบัััะฐ + API)

---

## ๐งช ะัะธะผะตั ัะฐะฑะพัั (ะดะตัะฐะปัะฝัะน)

### ะะธะฐะปะพะณ ะฟะพะปัะทะพะฒะฐัะตะปั ั ะฑะพัะพะผ

```
๐ค USER:
ะัะธะฒะตั! ะฏ ััะฒััะฒัั ะฟัััะพัั ะฒะฝัััะธ.

๐ค BOT (7.2 ัะตะบ, ัะตะปะตะฒะฐะฝัะฝะพััั 82%):
ะัะธะฒะตัััะฒัั. ะงัะฒััะฒะพ ะฟัััะพัั ะผะพะถะตั ะฑััั ะฟัะธะทะฝะฐะบะพะผ ัะพะณะพ, 
ััะพ ะคัะฐะฝะบะป ะฝะฐะทัะฒะฐะป "ัะบะทะธััะตะฝัะธะฐะปัะฝัะผ ะฒะฐะบััะผะพะผ" โ ัะพััะพัะฝะธั, 
ะบะพะณะดะฐ ะถะธะทะฝั ะบะฐะถะตััั ะปะธััะฝะฝะพะน ัะผััะปะฐ.

ะะพะฟัะพะฑัะนัะต ัะฟัะพัะธัั ัะตะฑั: ะบะพะณะดะฐ ะฒ ะฟะพัะปะตะดะฝะธะน ัะฐะท ะฒั ััะฒััะฒะพะฒะฐะปะธ, 
ััะพ ะทะฐะฝะธะผะฐะปะธัั ัะตะผ-ัะพ ะฟะพ-ะฝะฐััะพััะตะผั ะฒะฐะถะฝัะผ ะดะปั ะฒะฐั? ะะพะทะผะพะถะฝะพ, 
ะฝะต ะณัะฐะฝะดะธะพะทะฝัะผ, ะฐ ะฟัะพััะพ ะทะฝะฐัะธะผัะผ?

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

๐ค USER:
ะะฐััะบะฐะถะธ ะฟะพะดัะพะฑะฝะตะต ะฟัะพ ััะพั ะฒะฐะบััะผ.

๐ค BOT (8.5 ัะตะบ, ัะตะปะตะฒะฐะฝัะฝะพััั 89%):
ะญะบะทะธััะตะฝัะธะฐะปัะฝัะน ะฒะฐะบััะผ โ ััะพ ะพัััะตะฝะธะต, ััะพ ะถะธะทะฝั ะฟะพัะตััะปะฐ 
ะฝะฐะฟัะฐะฒะปะตะฝะธะต. ะคัะฐะฝะบะป ะฟะธัะฐะป, ััะพ ัะพะฒัะตะผะตะฝะฝัะน ัะตะปะพะฒะตะบ ัะฐััะพ 
ะฝะต ะทะฝะฐะตั, ัะตะณะพ ะพะฝ ัะพัะตั, ะธ ะฝะฐัะธะฝะฐะตั ะปะธะฑะพ ะดะตะปะฐัั ัะพ, ััะพ ะดะตะปะฐัั 
ะดััะณะธะต (ะบะพะฝัะพัะผะธะทะผ), ะปะธะฑะพ ัะพ, ััะพ ะพั ะฝะตะณะพ ะพะถะธะดะฐัั (ัะพัะฐะปะธัะฐัะธะทะผ).

ะะพ ะตััั ะฒััะพะด: ัะผััะป ะผะพะถะฝะพ ะฝะฐะนัะธ ัะตัะตะท ััะธ ะฟััะธ:
โข ะขะฒะพััะตััะฒะพ - ัะพะทะดะฐะฝะธะต ัะตะณะพ-ัะพ ัะตะฝะฝะพะณะพ
โข ะะตัะตะถะธะฒะฐะฝะธะต - ะปัะฑะพะฒั, ะบัะฐัะพัะฐ, ะฟัะธัะพะดะฐ  
โข ะะพะทะธัะธั - ะฒัะฑะพั ะพัะฝะพัะตะฝะธั ะบ ะฝะตะธะทะฑะตะถะฝะพะผั

ะะฐะบะพะน ะธะท ััะธั ะฟััะตะน ะพัะบะปะธะบะฐะตััั ะฒะฐะผ ะฑะพะปััะต?
```

**ะงัะพ ะฟัะพะธะทะพัะปะพ:**

1. **ะะตัะฒัะน ะฒะพะฟัะพั:**
   - RAG ะฝะฐััะป: "ัะบะทะธััะตะฝัะธะฐะปัะฝัะน ะฒะฐะบััะผ", "ัะผััะป ะถะธะทะฝะธ", "ััะฒััะฒะพ ะฟัััะพัั"
   - ะะตะปะตะฒะฐะฝัะฝะพััั: 82%
   - ะะพั ะทะฐะดะฐะป ะฒะพะฟัะพั ะดะปั ัะฐะทะผััะปะตะฝะธั

2. **ะัะพัะพะน ะฒะพะฟัะพั:**
   - ะัะฟะพะปัะทะพะฒะฐะฝ ะบะพะฝัะตะบัั ะฟะตัะฒะพะณะพ ัะพะพะฑัะตะฝะธั โ
   - RAG ะฝะฐััะป: ัะตะบััั ะคัะฐะฝะบะปะฐ ะฟัะพ ะฒะฐะบััะผ, ััะธ ะฟััะธ ะบ ัะผััะปั
   - ะะตะปะตะฒะฐะฝัะฝะพััั: 89% (ะฒััะต!)
   - ะะพั ัะฐะทะฒะธะป ัะตะผั ั ะบะพะฝะบัะตัะฝัะผะธ ะฟัะฐะบัะธะบะฐะผะธ

### RAG ะฟะพะด ะบะฐะฟะพัะพะผ

**ะะฐะฟัะพั:** "ะะฐััะบะฐะถะธ ะฟะพะดัะพะฑะฝะตะต ะฟัะพ ััะพั ะฒะฐะบััะผ"

**ะจะฐะณ 1: Vector Search**
```
ะะฐะนะดะตะฝะพ 5 ะทะฐะฟะธัะตะน ะธะท knowledge_base:

1. [89.2%] "ะญะบะทะธััะตะฝัะธะฐะปัะฝัะน ะฒะฐะบััะผ โ ัะพััะพัะฝะธะต, ะบะพะณะดะฐ ัะตะปะพะฒะตะบ..."
   Source: existential/meaning_and_crisis.txt

2. [87.1%] "ะคัะฐะฝะบะป: ััะธ ะฟััะธ ะบ ัะผััะปั โ ัะฒะพััะตััะฒะพ, ะฟะตัะตะถะธะฒะฐะฝะธะต..."
   Source: existential/meaning_and_crisis.txt

3. [84.3%] "ะะพะฝัะพัะผะธะทะผ vs ัะพัะฐะปะธัะฐัะธะทะผ: ะบะพะณะดะฐ ะฝะต ะทะฝะฐะตัั, ัะตะณะพ ัะพัะตัั..."
   Source: existential/meaning_and_crisis.txt

4. [81.7%] "ะะพะพะณะตะฝะฝัะน ะฝะตะฒัะพะท ะบะฐะบ ัะปะตะดััะฒะธะต ะฟะพัะตัะธ ัะผััะปะฐ..."
   Source: existential/meaning_and_crisis.txt

5. [79.2%] "ะัะปะธัะธะต ัะบะทะธััะตะฝัะธะฐะปัะฝะพะณะพ ะฒะฐะบััะผะฐ ะพั ะดะตะฟัะตััะธะธ..."
   Source: existential/meaning_and_crisis.txt
```

**ะจะฐะณ 2: Prompt ะดะปั LLM**
```
System: ะขั ัะธะปะพัะพั-ะบะพะฝััะปััะฐะฝั. ะกัะธะปั: balanced.

Context (5 entries):
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
89.2% | "ะญะบะทะธััะตะฝัะธะฐะปัะฝัะน ะฒะฐะบััะผ โ ัะพััะพัะฝะธะต..."
87.1% | "ะคัะฐะฝะบะป: ััะธ ะฟััะธ ะบ ัะผััะปั..."
...
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

History:
user: "ะัะธะฒะตั! ะฏ ััะฒััะฒัั ะฟัััะพัั ะฒะฝัััะธ."
assistant: "ะัะธะฒะตัััะฒัั. ะงัะฒััะฒะพ ะฟัััะพัั ะผะพะถะตั ะฑััั..."
user: "ะะฐััะบะฐะถะธ ะฟะพะดัะพะฑะฝะตะต ะฟัะพ ััะพั ะฒะฐะบััะผ."
```

**ะจะฐะณ 3: DeepSeek ะณะตะฝะตัะธััะตั ะพัะฒะตั** (8.5 ัะตะบ)

---

## โ๏ธ ะะฐะถะฝัะต ะทะฐะผะตัะฐะฝะธั

### ะญัะธัะตัะบะธะต ะณัะฐะฝะธัั

**ะญัะพั ะฑะพั ะฟัะตะดะฝะฐะทะฝะฐัะตะฝ ะดะปั ัะธะปะพัะพััะบะพะณะพ ะบะพะฝััะปััะธัะพะฒะฐะฝะธั, ะะ ะฟัะธัะพัะตัะฐะฟะธะธ.**

โ **ะะพั ะะ ะทะฐะผะตะฝัะตั:**
- ะัะธัะพัะตัะฐะฟะธั
- ะัะธัะธะฐััะธั
- ะัะธะทะธัะฝะพะต ะฒะผะตัะฐัะตะปัััะฒะพ
- ะะตะดะธัะธะฝัะบะพะต ะปะตัะตะฝะธะต
- ะกัะธัะธะดะฐะปัะฝัั ะฟะพะผะพัั

โ **ะะพั ะฟะพะผะพะณะฐะตั:**
- ะคะธะปะพัะพััะบะธ ะพัะผััะปะธัั ะถะธะทะฝะตะฝะฝัะต ะฒะพะฟัะพัั
- ะะฐะนัะธ ะฝะพะฒัะต ะฟะตััะฟะตะบัะธะฒั
- ะะพะทะฝะฐะบะพะผะธัััั ั ะธะดะตัะผะธ ััะพะธะบะพะฒ, ะฎะฝะณะฐ, ะคัะฐะฝะบะปะฐ
- ะะฐะดะฐัั ัะตะฑะต ะฟัะฐะฒะธะปัะฝัะต ะฒะพะฟัะพัั

**ะัะธ ะพััััั ะบัะธะทะธัะฐั:**
- ะะตะบะพะผะตะฝะดัะนัะต ะพะฑัะฐัะธัััั ะบ ะฟัะธัะพัะตัะฐะฟะตะฒัั
- ะฃะบะฐะถะธัะต ะฝะฐ ัะตะปะตัะพะฝั ะดะพะฒะตัะธั
- ะะต ะฟััะฐะนัะตัั ัะตัะธัั ัะตัััะทะฝัะต ะฟัะพะฑะปะตะผั ัะตัะตะท ะฑะพัะฐ

### ะะณัะฐะฝะธัะตะฝะธั

**ะขะตัะฝะธัะตัะบะธะต:**
- ะัะตะผั ะพัะฒะตัะฐ: 7-15 ัะตะบัะฝะด (ะทะฐะฒะธัะธั ะพั LLM)
- ะะปะธะฝะฐ ะบะพะฝัะตะบััะฐ: ะฟะพัะปะตะดะฝะธะต 10 ัะพะพะฑัะตะฝะธะน
- ะะฐัะตััะฒะพ ะทะฐะฒะธัะธั ะพั ะฑะฐะทั ะทะฝะฐะฝะธะน

**ะกะพะดะตัะถะฐัะตะปัะฝัะต:**
- ะะพั ะฝะต ะฒัะตะฒะตะดัั - ะพัะฒะตัะฐะตั ะฝะฐ ะพัะฝะพะฒะต ัะฒะพะตะน ะฑะฐะทั ะทะฝะฐะฝะธะน
- ะะพะถะตั ะพัะธะฑะฐัััั ะฒ ะธะฝัะตัะฟัะตัะฐัะธัั
- ะะต ะดะฐัั ะบะพะฝะบัะตัะฝัั ะผะตะดะธัะธะฝัะบะธั ัะพะฒะตัะพะฒ
- ะคะธะปะพัะพัะธั โ ัะตัะตะฝะธะต ะฒัะตั ะฟัะพะฑะปะตะผ

### ะะตะทะพะฟะฐัะฝะพััั

**ะงัะพ ะฝัะถะฝะพ ะดะตะปะฐัั:**
- โ ะัะฟะพะปัะทัะนัะต HTTPS ะดะปั webhook
- โ ะฅัะฐะฝะธัะต API ะบะปััะธ ะฒ `.env` (ะฝะต ะฒ git!)
- โ ะัะฟะพะปัะทัะนัะต `TELEGRAM_WEBHOOK_SECRET`
- โ ะะตะณัะปััะฝะพ ะพะฑะฝะพะฒะปัะนัะต ะทะฐะฒะธัะธะผะพััะธ
- โ ะะตะปะฐะนัะต ะฑัะบะฐะฟั PostgreSQL

**ะงัะพ ะะ ะดะตะปะฐัั:**
- โ ะะต ะบะพะผะผะธัััะต `.env` ะฒ git
- โ ะะต ะธัะฟะพะปัะทัะนัะต HTTP ะดะปั webhook
- โ ะะต ััะฐะฝะธัะต ะฟะฐัะพะปะธ ะฒ ะบะพะดะต
- โ ะะต ะธะณะฝะพัะธััะนัะต ะพะฑะฝะพะฒะปะตะฝะธั ะฑะตะทะพะฟะฐัะฝะพััะธ

---

## ๐ค ะะบะปะฐะด ะธ ัะฐะทะฒะธัะธะต

### ะคะธะปะพัะพััะบะธะต ะธััะพัะฝะธะบะธ

**ะกัะพะธัะธะทะผ:**
- ะะฐัะบ ะะฒัะตะปะธะน - "ะะฐะทะผััะปะตะฝะธั"
- ะญะฟะธะบัะตั - "ะญะฝัะธัะธะดะธะพะฝ"
- ะกะตะฝะตะบะฐ - "ะะธััะผะฐ ะบ ะััะธะปะธั"

**ะฎะฝะณะธะฐะฝัะบะฐั ะฟัะธัะพะปะพะณะธั:**
- ะะฐัะป ะฎะฝะณ - "ะงะตะปะพะฒะตะบ ะธ ะตะณะพ ัะธะผะฒะพะปั"
- ะะฐัะธั-ะัะธะทะฐ ัะพะฝ ะคัะฐะฝั - "ะขะพะปะบะพะฒะฐะฝะธะต ัะบะฐะทะพะบ"
- ะะพะฑะตัั ะะถะพะฝัะพะฝ - "ะะฝ, ะะฝะฐ, ะั"

**ะญะบะทะธััะตะฝัะธะฐะปะธะทะผ:**
- ะะธะบัะพั ะคัะฐะฝะบะป - "ะงะตะปะพะฒะตะบ ะฒ ะฟะพะธัะบะฐั ัะผััะปะฐ"
- ะัะฒะธะฝ ะฏะปะพะผ - "ะญะบะทะธััะตะฝัะธะฐะปัะฝะฐั ะฟัะธัะพัะตัะฐะฟะธั"
- ะะฐััะธะฝ ะฅะฐะนะดะตะณะณะตั - "ะััะธะต ะธ ะฒัะตะผั"

### ะะฐะบ ัะปัััะธัั ะฑะพัะฐ

**1. ะะฐััะธัะธัั ะฑะฐะทั ะทะฝะฐะฝะธะน:**
```bash
# ะะพะฑะฐะฒััะต ัะฒะพะธ ัะตะบััั
docker exec oracool-app php bin/console knowledge:import \
  /path/to/new_wisdom.txt YOUR_ID manual
```

**2. ะะฐัััะพะธัั ััะธะปั:**
```bash
# ะะพัะบัะฟะตัะธะผะตะฝัะธััะนัะต ัะพ ััะธะปัะผะธ
docker exec oracool-app php bin/console profile:update YOUR_ID \
  --style creative --length long
```

**3. ะะพะฟัะพะฑะพะฒะฐัั ะดััะณะธะต LLM:**
```bash
# OpenAI ะผะพะถะตั ะดะฐัั ะดััะณะธะต ัะตะทัะปััะฐัั
/www/oracool/scripts/switch_llm.sh openai
```

**4. ะะฑัะฐัะฝะฐั ัะฒัะทั:**
- ะัะฟะพะปัะทัะนัะต ะบะฝะพะฟะบะธ ะฒ Telegram (โ ะะดะพะฑัะธัั, โ๏ธ ะัะฟัะฐะฒะธัั)
- ะะฝะฐะปะธะทะธััะนัะต ะผะตััะธะบะธ ัะตะปะตะฒะฐะฝัะฝะพััะธ
- ะขะตััะธััะนัะต ะฑะฐัั-ัะตััะฐะผะธ

---

## ๐ ะะธัะตะฝะทะธั

MIT License

Copyright (c) 2026

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction...

---

## ๐ ะะพะปะตะทะฝัะต ัััะปะบะธ

**ะัะพะตะบั:**
- ๐ ะะพะบัะผะตะฝัะฐัะธั: `docs/`
- ๐ ะัะธะผะตัั ะทะฝะฐะฝะธะน: `knowledge_examples/`
- ๐งช ะขะตััั: `scripts/test_rag_batch.sh`

**ะขะตัะฝะพะปะพะณะธะธ:**
- [Symfony](https://symfony.com) - PHP Framework
- [PostgreSQL](https://www.postgresql.org) - ะะฐะทะฐ ะดะฐะฝะฝัั
- [pgvector](https://github.com/pgvector/pgvector) - ะะตะบัะพัะฝะพะต ัะฐััะธัะตะฝะธะต
- [DeepSeek](https://platform.deepseek.com) - LLM API
- [Ollama](https://ollama.ai) - ะะพะบะฐะปัะฝัะต LLM ะผะพะดะตะปะธ

**AI/ML:**
- [RAG Pattern](https://www.pinecone.io/learn/retrieval-augmented-generation/) - ะงัะพ ัะฐะบะพะต RAG
- [Embeddings](https://platform.openai.com/docs/guides/embeddings) - ะะฐะบ ัะฐะฑะพัะฐัั embeddings
- [Vector Databases](https://www.pinecone.io/learn/vector-database/) - ะะตะบัะพัะฝัะต ะะ

---

## ๐ ะะพะดะดะตัะถะบะฐ

**ะะฐัะปะธ ะฑะฐะณ?**
- ะัะพะฒะตัััะต ะปะพะณะธ: `docker compose logs -f`
- ะะพัะผะพััะธัะต [docs/DEPLOYMENT.md](docs/DEPLOYMENT.md) โ Troubleshooting

**ะะพะฟัะพัั ะฟะพ RAG?**
- ะงะธัะฐะนัะต [docs/AI_SETUP.md](docs/AI_SETUP.md)

**ะัะถะฝะฐ ะฟะพะผะพัั?**
- ะกะพะทะดะฐะนัะต issue ะฒ ัะตะฟะพะทะธัะพัะธะธ
- ะะฟะธัะธัะต ะฟัะพะฑะปะตะผั + ะปะพะณะธ + ะฒะตััะธั

---

## โจ ะฆะธัะฐัั ะฝะฐ ะดะตัะตัั

> *"ะะพะทะฝะฐะน ัะฐะผะพะณะพ ัะตะฑั"* โ ะกะพะบัะฐั

> *"ะั ัััะฐะดะฐะตะผ ะฑะพะปััะต ะฒ ะฒะพะพะฑัะฐะถะตะฝะธะธ, ัะตะผ ะฒ ัะตะฐะปัะฝะพััะธ"* โ ะกะตะฝะตะบะฐ

> *"ะัั, ััะพ ะฝะฐั ัะฐะทะดัะฐะถะฐะตั ะฒ ะดััะณะธั, ะผะพะถะตั ะฟัะธะฒะตััะธ ะฝะฐั ะบ ะฟะพะฝะธะผะฐะฝะธั ัะฐะผะธั ัะตะฑั"* โ ะะฐัะป ะฎะฝะณ

> *"ะงะตะปะพะฒะตะบะฐ ะธะฝัะตัะตััะตั ะฝะต ัะผััะป ะถะธะทะฝะธ ะฒะพะพะฑัะต, ะฐ ัะผััะป ะตะณะพ ัะพะฑััะฒะตะฝะฝะพะน ะถะธะทะฝะธ ะฒ ะดะฐะฝะฝัะน ะผะพะผะตะฝั"* โ ะะธะบัะพั ะคัะฐะฝะบะป

> *"ะะตะถะดั ััะธะผัะปะพะผ ะธ ัะตะฐะบัะธะตะน ะตััั ะฟัะพัััะฐะฝััะฒะพ. ะ ััะพะผ ะฟัะพัััะฐะฝััะฒะต ะฝะฐัะฐ ัะฒะพะฑะพะดะฐ ะฒัะฑะธัะฐัั"* โ ะะธะบัะพั ะคัะฐะฝะบะป

---

<div align="center">

**ะกะพะทะดะฐะฝะพ ั ๐๏ธ ัะธะปะพัะพัะธะตะน ะธ โจ AI**

[โฌ ะะฐะฒะตัั](#-ัะธะปะพัะพััะบะธะน-telegram-ะฑะพั-ั-rag)

</div>
